Checkpoint Node
================

NameNode сохраняет свое пространство имен с помощью двух файлов: fsimage, который является последней контрольной точкой пространства имен, и журнал изменений (log) в пространстве имен с момента контрольной точки. Когда NameNode запускается, он объединяет fsimage и журнал изменений, чтобы обеспечить актуальное представление метаданных файловой системы. Затем NameNode перезаписывает fsimage с новым состоянием **HDFS** и начинает новый журнал изменений.

Узел Checkpoint периодически создает контрольные точки пространства имен. Он загружает fsimage и изменения из активного NameNode, объединяет их локально и загружает новое изображение обратно в активный NameNode. Checkpoint Node обычно работает на компьютере, отличном от NameNode, поскольку их требования к памяти одиинаковы. Запуск Checkpoint Node осуществляется командой ``bin/hdfs namenode -checkpoint`` на указанном в конфигурационном файле узле.

Расположение узла Checkpoint (или Backup) и сопровождающего его веб-интерфейса настраивается с помощью переменных конфигурации *dfs.namenode.backup.address* и *dfs.namenode.backup.http-address*.

Запуск процесса контрольной точки на узле Checkpoint контролируется двумя параметрами кофигурации:

* *dfs.namenode.checkpoint.period* -- по умолчанию установлено значение на 1 час; определяет максимальную задержку между двумя последовательными контрольными точками;

* *dfs.namenode.checkpoint.txns* -- по умолчанию установлено значение на 1 миллион; определяет количество незарегистрированных транзакций на NameNode, которые будут вызывать срочную контрольную точку, даже если период ее не был достигнут.

Checkpoint Node хранит последнюю контрольную точку в каталоге, который структурирован таким же образом, как и каталог NameNode. Таким образом контрольное изображение всегда доступно для чтения из NameNode при необходимости. 

.. important:: В файле конфигурации кластера можно указать несколько Checkpoint Node.


