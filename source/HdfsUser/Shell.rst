Команды Shell
===============

**Hadoop** включает в себя различные shell-подобные команды, напрямую взаимодействующие с **HDFS** и другими файловыми системами, которые поддерживает **Hadoop**. Команда ``bin/hdfs dfs -help`` выводит список команд, поддерживаемых оболочкой **Hadoop**, а ``bin/hdfs dfs -help command-name`` отображает более подробную справку. Команды поддерживают большинство обычных операций файловой системы, таких как копирование файлов, изменение прав доступа к файлам и т.д. Но также поддерживаются некоторые специфические операции **HDFS**, например, изменение репликации файлов.

Команда ``bin/hdfs dfsadmin`` поддерживает операции, связанные с администрированием **HDFS**, а ``bin/hdfs dfsadmin -help`` выводит список всех поддерживаемых в данный момент команд, например:

* ``-report`` -- сообщает основную статистику HDFS. Некоторые из этих сведений также доступны на главной странице NameNode;

* ``-safemode`` -- хотя обычно это не требуется, администратор может вручную войти или покинуть режим Safemode;

* ``-finalizeUpgrade`` -- удаляет предыдущую резервную копию кластера, созданную во время последнего обновления;

* ``-refreshNodes`` -- обновляет интерфейс NameNode с набором узлов DataNode, разрешенным подключаться к NameNode. По умолчанию NameNodes повторно считывает имена узлов DataNode в файле, определенном dfs.hosts и dfs.hosts.exclude. Хосты в dfs.hosts -- это узлы данных, которые являются частью кластера. Если в dfs.hosts есть записи, то только хосты в нем могут регистрироваться с помощью NameNode. Записи в dfs.hosts.exclude -- это узлы данных, которые должны быть выведены из эксплуатации. Альтернативно, если для *dfs.namenode.hosts.provider.classname* задано значение *org.apache.hadoop.hdfs.server.blockmanagement.CombinedHostFileManager*, все хосты include и exclude указываются в файле JSON, заданном dfs.hosts. Вывод из эксплуатации завершает DataNodes, когда все их записи среплицированы в другие DataNodes, при этом списанные узлы не выключаются автоматически и не выбираются для записи новых реплик;

* ``-printTopology`` -- вывод топологии кластера. Отображение дерева стоек и узлов данных, прикрепленных к трекам, как показано в NameNode.

