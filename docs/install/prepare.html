

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Подготовка к установке кластера &mdash; Arenadata 1.4 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../_static/banner.css" type="text/css" />
  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="Arenadata 1.4 documentation" href="../index.html"/>
        <link rel="up" title="Инструкция по установке кластера" href="../install.html"/>
        <link rel="next" title="Установка сервера Ambari 2.2.1" href="install.html"/>
        <link rel="prev" title="Загрузка дистрибутива кластера" href="download.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Arenadata
          

          
          </a>

          
            
            
              <div class="version">
                1.4
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Общий обзор</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../install.html">Инструкция по установке кластера</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="download.html">Загрузка дистрибутива кластера</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Подготовка к установке кластера</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id2">Совместимость стека</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id3">Системные требования</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">Требования к памяти</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id5">Требования к объему пакета и количеству индексных дескрипторов</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">Проверка максимального количества открытых файловых дескрипторов</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id7">Сбор информации</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hadoop">Подготовка к установке Hadoop</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ssh">Настройка беспарольного SSH</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id8">Настройка учетных записей пользователей</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">Синхронизация часов на всех узлах кластера</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dns-nscd">Настройка DNS и NSCD</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">Редактирование файла хоста</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">Проверка имени хоста</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">Редактирование файла конфигурации сети</a></li>
<li class="toctree-l4"><a class="reference internal" href="#iptables">Настройка IPTables</a></li>
<li class="toctree-l4"><a class="reference internal" href="#selinux-packagekit-umask">Настройка SELinux, PackageKit и Umask</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="install.html">Установка сервера Ambari 2.2.1</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Arenadata</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../install.html">Инструкция по установке кластера</a> &raquo;</li>
        
      <li>Подготовка к установке кластера</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/install/prepare.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="id1">
<h1>Подготовка к установке кластера<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h1>
<p>В разделе «Подготовка к установке кластера» приведена информация и
даны материалы, которые необходимо подготовить для установки кластера
ADH с помощью Ambari:</p>
<div class="toctree-wrapper compound">
</div>
<ul class="simple">
<li>Совместимость стека (см. п. 1.1);</li>
<li>Системные требования (см. п. 1.2);</li>
<li>Сбор информации (см. п. 1.3);</li>
<li>Подготовка к установке Hadoop (см. п. 1.4).</li>
</ul>
<p>Ambari обеспечивает комплексное решение для управления и мониторинга
кластера ADH. Используя API-интерфейс Ambari Web UI и REST, можно
развертывать, разрабатывать, управлять изменениями конфигурации и
контролировать службы всех узлов кластера с центральной точки.</p>
<div class="section" id="id2">
<h2>Совместимость стека<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<p>Ambari 2.2.1 совместим с версиями ADH 1.3 и ADH 1.4.</p>
</div>
<div class="section" id="id3">
<h2>Системные требования<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Для корректного запуска Hadoop необходимо соблюдение минимальных
системных требований, представленных в Табл. 1., а также описанных в
разделах «Требования к памяти» (см. п. 1.2.1), «Требования к объему
пакета и количеству индексных дескрипторов» (см. п. 1.2.2) и «Проверка
максимального количества открытых файловых дескрипторов» (см. п.
1.2.3).</p>
<table border="1" class="docutils" id="id13">
<caption><span class="caption-text">Табл.1. Минимальные системные требования для установки кластера Arenadata Ambari</span><a class="headerlink" href="#id13" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Компонент</th>
<th class="head">Требования</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Операционная система</td>
<td><p class="first">Поддерживаются следующие 64-разрядные ОС:</p>
<ul class="simple">
<li>Red Hat Enterprise Linux (RHEL) v7.x;</li>
<li>CentOS v7.x;</li>
</ul>
<p class="last">Установщик использует множество пакетов из базовых репозиториев ОС.
Если нет полного набора базовых репозиториев ОС, доступных для всех
компьютеров во время установки, могут возникнуть проблемы.
В случае возникновения проблем с недоступными базовыми хранилищами ОС,
необходимо обратиться к системному администратору для обеспечения
проксирования или зеркалирования этих дополнительных репозиториев</p>
</td>
</tr>
<tr class="row-odd"><td>Браузер</td>
<td><p class="first">Мастер установки Ambari работает как веб-приложение на основе
браузера. Поэтому необходимо наличие машины, способной использовать
графический браузер для применения данного веб-инструмента.</p>
<p>Минимальные требуемые версии браузера:</p>
<ul class="simple">
<li>Internet Explorer 9.0 (устаревшая версия);</li>
<li>Firefox 18;</li>
<li>Google Chrome 26;</li>
<li>Safari 5;</li>
</ul>
<p class="last">На платформе рекомендуется обновить браузер до последней, стабильной
версии (кроме Internet Explorer 9.0)</p>
</td>
</tr>
<tr class="row-even"><td>Программное обеспечение</td>
<td><p class="first">На всех узлах кластера необходимо установить следующие компоненты:</p>
<ul class="last simple">
<li>YUM и rpm (RHEL / CentOS);</li>
<li>Zypper и php_curl (SLES);</li>
<li>Scp, curl, unzip, tar и wget;</li>
<li>OpenSSL (v1.01, build 16 или новее);</li>
<li>Python v2.7</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>Java</td>
<td><p class="first">Поддерживаются следующие среды выполнения Java:</p>
<ul class="simple">
<li>Oracle JDK 1.8 64-разрядный: минимум JDK 1.8.64;</li>
</ul>
<p class="last">Во время установки необходимо выбрать JDK 1.8, поскольку ADH 1.4
несовместим с JDK 1.7</p>
</td>
</tr>
<tr class="row-even"><td>База данных</td>
<td><p class="first">Ambari требует реляционной базы данных для хранения информации о
конфигурации кластера и топологии. При установке ADH Stack с Hive или
Oozie – для них также требуется реляционная база данных</p>
<ul class="simple">
<li>Ambari:</li>
<li>PostgreSQL 8;</li>
<li>PostgreSQL 9.1.13+, 9.3;</li>
<li>MariaDB 5.5;</li>
<li>Oracle 11gr2, 12c.</li>
</ul>
<p>По умолчанию Ambari устанавливает инстанс PostgreSQL на хост сервера
Ambari. При этом использование данного инстанса PostgreSQL, MySQL или
Oracle необязательно. Дополнительная информация указана в пункте
«Настройка сервера Ambari 2.2.1» (см. п. 2.3)</p>
<ul class="simple">
<li>Hive:</li>
<li>PostgreSQL 8;</li>
<li>PostgreSQL 9.1.13+, 9.3;</li>
<li>MariaDB 5.5;</li>
<li>Oracle 11gr2, 12c.</li>
</ul>
<p>По умолчанию (на RHEL / CentOS), Ambari устанавливает инстанс MySQL на
хосте Hive Metastore. Также можно использовать указанный инстанс
PostgreSQL, MySQL или Oracle. Дополнительная информация указана в
пункте «Настройка сервера Ambari 2.2.1» (см. п. 2.3)</p>
<ul class="simple">
<li>Oozie:</li>
<li>PostgreSQL 8;</li>
<li>PostgreSQL 9.1.13+, 9.3;</li>
<li>MariaDB 5.5;</li>
<li>Oracle 11gr2, 12c.</li>
</ul>
<p>По умолчанию Ambari устанавливает инстанс Derby на хосте Oozie Server.
При этом использование данного инстанса PostgreSQL, MySQL или Oracle
необязательно. Дополнительная информация указана в пункте «Настройка
сервера Ambari 2.2.1» (см. п. 2.3).</p>
<p>Инстанс Derby для рабочей среды не должен использоваться по умолчанию.
Если планируется применение Derby для demo-версии, разработки или
тестирования окружающей среды, перенос базы данных Oozie из Derby в
новую базу данных доступен только в сообществе</p>
<ul class="simple">
<li>Ranger:</li>
<li>PostgreSQL 9.1.13+, 9.3;</li>
<li>MariaDB 5.5;</li>
<li>Oracle 11gr2, 12c.</li>
</ul>
<p class="last">Для Ranger необходим указанный инстанс PostgreSQL, MySQL или Oracle
Для базы данных Ambari, если используется существующая база данных
Oracle, необходимо убедиться, что пользователь Oracle работает на
порте, отличном от 8080. Это необходимо, чтобы избежать конфликта с
портом Ambari, установленном по умолчанию. Также следует обратиться к
<cite>Справочному руководству Ambari</cite> для получения информации о возможных
изменениях порта по умолчанию сервера Ambari.
Использование параметров базы данных Microsoft SQL Server или SQL
Anywhere не поддерживается</p>
</td>
</tr>
</tbody>
</table>
<div class="section" id="id4">
<h3>Требования к памяти<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>Хосту Ambari необходимо иметь как минимум 1 ГБ оперативной памяти и
500 МБ свободной. На любом узле можно проверить доступную память,
выполнив команду:</p>
<p>free –m</p>
<p>В случае если планируется установить Ambari Metrics Service в кластер,
для уточнения требований к ресурсам необходимо ознакомиться с разделом
«Параметры настройки Ambari Metrics» в Справочном руководстве Ambari.
В общем случае хосту, на котором планируется запускать Ambari Metrics
Collector, необходимо иметь доступную память и дисковое пространство в
зависимости от размера кластера (Табл. 2.).</p>
<table border="1" class="docutils" id="id14">
<caption><span class="caption-text">Табл.2. Требования к объему памяти в зависимости от размера кластера</span><a class="headerlink" href="#id14" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Количество хостов</th>
<th class="head">Доступная память</th>
<th class="head">Дисковое пространство</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>1024 MB</td>
<td>10 GB</td>
</tr>
<tr class="row-odd"><td>10</td>
<td>1024 MB</td>
<td>20 GB</td>
</tr>
<tr class="row-even"><td>50</td>
<td>2048 MB</td>
<td>50 GB</td>
</tr>
<tr class="row-odd"><td>100</td>
<td>4096 MB</td>
<td>100 GB</td>
</tr>
<tr class="row-even"><td>300</td>
<td>4096 MB</td>
<td>100 GB</td>
</tr>
<tr class="row-odd"><td>500</td>
<td>8096 MB</td>
<td>200 GB</td>
</tr>
<tr class="row-even"><td>1000</td>
<td>12288 MB</td>
<td>200 GB</td>
</tr>
<tr class="row-odd"><td>2000</td>
<td>16384 MB</td>
<td>500 GB</td>
</tr>
</tbody>
</table>
<p>Сведения в таблице предлагаются в качестве рекомендаций. Необходимо
проверять каждый частный случай.</p>
</div>
<div class="section" id="id5">
<h3>Требования к объему пакета и количеству индексных дескрипторов<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils" id="id15">
<caption><span class="caption-text">Табл.3. Приблизительные значения размера пакета и количества индексных дескрипторов</span><a class="headerlink" href="#id15" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&#160;</th>
<th class="head">Размер пакета</th>
<th class="head">Количество индексных дескрипторов</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Ambari Server</td>
<td>100MB</td>
<td>5.000</td>
</tr>
<tr class="row-odd"><td>Ambari Agent</td>
<td>8MB</td>
<td>1.000</td>
</tr>
<tr class="row-even"><td>Ambari Metrics Collector</td>
<td>225MB</td>
<td>4.000</td>
</tr>
<tr class="row-odd"><td>Ambari Metrics Monitor</td>
<td>1MB</td>
<td>100</td>
</tr>
<tr class="row-even"><td>Ambari Metrics Hadoop Sink</td>
<td>8MB</td>
<td>100</td>
</tr>
<tr class="row-odd"><td>After Ambari Server Setup</td>
<td>Данные отсутствуют</td>
<td>4.000</td>
</tr>
<tr class="row-even"><td>After Ambari Server Start</td>
<td>Данные отсутствуют</td>
<td>500</td>
</tr>
<tr class="row-odd"><td>After Ambari Agent Start</td>
<td>Данные отсутствуют</td>
<td>200</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id6">
<h3>Проверка максимального количества открытых файловых дескрипторов<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<p>Рекомендуемое максимальное количество открытых файловых дескрипторов –
более 10000. Для проверки текущего значения, заданного для
максимального открытых файловых дескрипторов, необходимо выполнить
следующие команды на каждом хосте:</p>
<p><strong class="command">ulimit -Sn</strong></p>
<p><strong class="command">ulimit -Hn</strong></p>
<p>Если значение максимального количества открытых файловых дескрипторов
не превышает 10000, то следует установить подходящее значение,
выполнив команду:</p>
<p><strong class="command">ulimit -n 10000</strong></p>
</div>
</div>
<div class="section" id="id7">
<h2>Сбор информации<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<p>Перед развертыванием кластера ADH необходимо:</p>
<ul class="simple">
<li>Проверить полное доменное имя каждого хоста в системе. Мастер
установки Ambari поддерживает использование IP-адресов. Для проверки и
установки полного доменного имени хоста FQDN необходимо
воспользоваться командой:</li>
</ul>
<p><strong class="command">hostname –f</strong></p>
<p>Развертывание всех компонентов ADH на одном хосте возможно, но это
подходит только для начальной установки. Как правило, для минимального
кластера настраивается три узла – один главный хост и два подчиненных.</p>
<ul class="simple">
<li>Определить список компонентов, которые необходимо настроить на каждом узле;</li>
<li>Установить базовые каталоги, которые будут определены в качестве точек для хранения:</li>
<li>Узел NameNode;</li>
<li>Узел DataNodes;</li>
<li>Вторичный узел NameNode;</li>
<li>Узел Оози;</li>
<li>Узел YARN;</li>
<li>Узел ZooKeeper, если устанавливается ZooKeeper;</li>
<li>Различные журналы, файлы pid и db, в зависимости от типа установки.</li>
</ul>
<p>Необходимо использовать базовые каталоги, которые предоставляют
постоянные места хранения компонентов ADH и данных Hadoop.</p>
<p>Не используйте /TMP каталог для установки, так как файлы могут быть удалены в любое время</p>
</div>
<div class="section" id="hadoop">
<h2>Подготовка к установке Hadoop<a class="headerlink" href="#hadoop" title="Permalink to this headline">¶</a></h2>
<p>Для корректной развертки Hadoop необходимо ознакомиться и выполнить рекомендации:</p>
<div class="section" id="ssh">
<h3>Настройка беспарольного SSH<a class="headerlink" href="#ssh" title="Permalink to this headline">¶</a></h3>
<p>Для Ambari-сервера необходимо, чтобы Ambari-агенты были установлены на
всех узлах кластера. Сервер Ambari связывается с агентами для
выполнения установки и управления задачами кластера Arenadata.</p>
<p>Для автоматической установки Ambari-агентов на всех узлах кластера
сервером Ambari необходимо настроить для пользователя, под которым
производится установка (по умолчанию от администратора), беспарольное
SSH-соединение между хостом Ambari Server и всеми другими хостами в
кластере.</p>
<p>Для настройки беспарольного SSH необходимо под учетной записью
администратора выполнить следующие инструкции:</p>
<ul>
<li><p class="first">Создать публичный и приватный ключи SSH на хосте сервера Ambari:</p>
<p><strong class="command">ssh-keygen</strong></p>
</li>
<li><p class="first">При запросе пароля для приватного ключа необходимо не задавая значения (поле для ввода пароля оставить пустым) нажать клавишу Enter;</p>
</li>
<li><p class="first">Скопировать публичный ключ SSH (id_rsa.pub) в учетную запись root на все узлы кластера:</p>
<p><strong class="command">ssh-copy-id root&#64;&lt;remote.target.host&gt;</strong>
где &lt;remote.target.host&gt; – значение имени каждого хоста в кластере;</p>
<p>В случае если во время первого подключения отображается предупреждающее сообщение, необходимо ответить Yes:</p>
<p>Are you sure you want to continue connecting (yes/no)?</p>
</li>
<li><p class="first">Убедиться, что с сервера Ambari выполняется подключение к каждому
хосту в кластере с помощью SSH без пароля:</p>
<p><strong class="command">ssh root&#64;&lt;remote.target.host&gt;</strong></p>
</li>
<li><p class="first">Сохранить копию приватного ключа SSH на компьютере, с которого
планируется запуск веб-мастера установки Ambari Install Wizard.</p>
</li>
</ul>
<p>Хост сервера Ambari использует аутентификацию публичного ключа SSH для
удаленного доступа и установки Ambari-агента.</p>
<p>Так же Ambari-агенты возможно установить вручную на каждом узле
кластера (см. п. 3.1). В этом случае не будет необходимости создавать
и распространять ключи SSH.</p>
</div>
<div class="section" id="id8">
<h3>Настройка учетных записей пользователей<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>Для каждого сервиса ADH необходима учетная запись пользователя. Мастер
установки Ambari создает новые и сохраняет все существующие учетные
записи пользователей и использует эти аккаунты при настройке сервисов
Hadoop.</p>
</div>
<div class="section" id="id9">
<h3>Синхронизация часов на всех узлах кластера<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<p>Часам на всех узлах кластера и на машине, запускающей браузер для
доступа к веб-интерфейсу Ambari, необходимо иметь возможность
синхронизации друг с другом. Для этого следует включить службу NTP и
убедиться, что синхронизация происходит автоматически:</p>
<ul>
<li><p class="first">RHEL/CentOS/Oracle 6:</p>
<p><strong class="command">chkconfig --list ntpd</strong></p>
</li>
<li><p class="first">RHEL/CentOS/Oracle 7:</p>
<p><strong class="command">systemctl is-enabled ntpd</strong></p>
</li>
</ul>
<p>Чтобы настроить службу NTP на автоматический запуск при загрузке
машины, необходимо выполнить следующую команду на каждом хосте:</p>
<ul>
<li><p class="first">RHEL/CentOS/Oracle 6:</p>
<p><strong class="command">chkconfig ntpd on</strong></p>
</li>
<li><p class="first">RHEL/CentOS/Oracle 7:</p>
<p><strong class="command">systemctl enable ntpd</strong></p>
</li>
</ul>
<p>Чтобы запустить службу NTP, необходимо выполнить команду на каждом
хосте:</p>
<ul>
<li><p class="first">RHEL/CentOS/Oracle 6:</p>
<p><strong class="command">service ntpd start</strong></p>
</li>
<li><p class="first">CentOS/Oracle 7:</p>
<p><strong class="command">systemctl start ntpd</strong></p>
</li>
</ul>
</div>
<div class="section" id="dns-nscd">
<h3>Настройка DNS и NSCD<a class="headerlink" href="#dns-nscd" title="Permalink to this headline">¶</a></h3>
<p>Все хосты в системе должны быть настроены как для прямого, так и для
обратного DNS.</p>
<p>В случае если не получается настроить DNS, необходимо отредактировать
файл /etc/hosts на каждом узле кластера так, чтобы он содержал IP-
адрес и доменное имя Fully Qualified Domain Name (FQDN) каждого хоста.</p>
<p>Следующие инструкции представлены в виде обзора и охватывают базовую
настройку сети для общих узлов Linux. Разные версии и варианты Linux
могут потребовать различные команды и процедуры.</p>
<p>Hadoop сильно зависит от DNS и выполняет многие DNS-запросы во время
работы. Чтобы снизить нагрузку на инфраструктуру DNS, настоятельно
рекомендуется использовать Name Service Caching Daemon (NSCD) на узлах
кластера под управлением Linux. NSCD кэширует запросы хоста,
пользователя и группы, а также обеспечивает лучшую производительность
и снижает нагрузку на инфраструктуру DNS.</p>
</div>
<div class="section" id="id10">
<h3>Редактирование файла хоста<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>Для редактирования файла хоста необходимо используя текстовый редактор
открыть файл hosts на каждом узле кластера:</p>
<p>vi /etc/hosts</p>
<p>И добавить строку для каждого хоста, состоящую из IP-адреса и FQDN,
например:</p>
<p>1.2.3.4 &lt;fully.qualified.domain.name&gt;</p>
<p>127.0.0.1 localhost.localdomain localhost</p>
<p>::1 localhost6.localdomain6 localhost6</p>
</div>
<div class="section" id="id11">
<h3>Проверка имени хоста<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>Чтобы убедиться, что имя хоста установлено, необходимо выполнить
следующую команду:</p>
<p><strong class="command">hostname –f</strong></p>
<p>В результате именю хоста возвращается значение
fully.qualified.domain.name. Для задания имени на каждом узле кластера
необходимо использовать команду:</p>
<p><strong class="command">hostname &lt;fully.qualified.domain.name&gt;</strong></p>
</div>
<div class="section" id="id12">
<h3>Редактирование файла конфигурации сети<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<p>С помощью текстового редактора необходимо открыть файл конфигурации
сети на каждом узле и установить ему требуемую конфигурацию сети для
каждого узла:</p>
<p><strong class="command">vi /etc/sysconfig/network</strong></p>
<p>Следует изменить свойство HOSTNAME, чтобы задать полное доменное имя:</p>
<p>NETWORKING=yes</p>
<p>HOSTNAME=&lt;fully.qualified.domain.name&gt;</p>
</div>
<div class="section" id="iptables">
<h3>Настройка IPTables<a class="headerlink" href="#iptables" title="Permalink to this headline">¶</a></h3>
<p>Для взаимодействия во время установки Ambari с развернутыми узлами
необходимо, чтобы определенные компоненты были открыты и доступны.
Самый простой способ сделать это – временно отключить IPTables:</p>
<ul>
<li><p class="first">RHEL/CentOS 6:</p>
<p><strong class="command">chkconfig iptables off</strong></p>
<p><strong class="command">/etc/init.d/iptables stop</strong></p>
</li>
<li><p class="first">RHEL/CentOS 7:</p>
<p><strong class="command">systemctl disable firewalld</strong></p>
<p><strong class="command">systemctl stop firewalld</strong></p>
</li>
</ul>
<p>По завершению установки следует перезапустить IPTables.</p>
<p>В случае если протоколы безопасности предотвращают отключение
IPTables, можно продолжить работу с включенными IPTables при условии,
что все необходимые порты открыты и доступны.</p>
<p>В процессе установки Ambari-сервера Ambari проверяет, работают ли
IPTables. В случае если IPTables запущены, выдается предупреждение,
напоминающее о необходимости проверить, что требуемые порты открыты и
доступны.</p>
<p>В мастере установки на шаге подтверждения узла также выдается
предупреждение для каждого хоста с запущенными IPTables.</p>
</div>
<div class="section" id="selinux-packagekit-umask">
<h3>Настройка SELinux, PackageKit и Umask<a class="headerlink" href="#selinux-packagekit-umask" title="Permalink to this headline">¶</a></h3>
<p>Работа с SELinux не поддерживается поэтому необходимо отключить SELinux:</p>
<p>Для этого следует установить значение
SELINUX=disabled в /etc/selinux/config и перезагрузить узел.</p>
<p>На установочном узле, где запущен RHEL/CentOS с установленным
PackageKit, с помощью текстового редактора необходимо открыть
/etc/yum/pluginconf.d/refresh-packagekit.conf и выполнить следующее
изменение:</p>
<p>enabled=0</p>
<p>PackageKit в системах SLES по умолчанию не включен. В случае если
PackageKit не был подключен принудительно, во время установки узла
SLES этот шаг можно пропустить.</p>
<p>UMASK устанавливает разрешения по умолчанию или базовые разрешения при
создании нового файла или папки в системе Linux. Большинство
дистрибутивов Linux устанавливают UMASK значение по умолчанию 022. Это
разрешение допускает чтение, запись и выполнение 755 для новых файлов
или папок. Значение UMASK равное 027 допускает чтение, запись и
выполнение 750 для новых файлов или папок.</p>
<p>Ambari поддерживает оба значения UMASK. Например, чтобы установить
значение UMASK равное 022, необходимо запустить команду в корне на
всех хостах:</p>
<p>vi /etc/profile</p>
<p>Затем добавить следующую строку:</p>
<p>umask 022</p>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="install.html" class="btn btn-neutral float-right" title="Установка сервера Ambari 2.2.1" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="download.html" class="btn btn-neutral" title="Загрузка дистрибутива кластера" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Arenadata.io.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  
<div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
        <span class="fa fa-book"> Other Versions</span>
        v: master
        <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
        <dl>
            <dt>Branches</dt>
            <dd><a href="../master/install/prepare.html">master</a></dd>
        </dl>
    </div>
</div>


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.4',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>